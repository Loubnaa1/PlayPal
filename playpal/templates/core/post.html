{% for post in posts %}
<div class="post">
  <div class="container">
    <div class="user">
      <div class="userInfo">
        <a href="{% url 'users:profile' %}">
          <img src="{{ post.author.profilemodel.profile_image.url }}" alt="user profile avatar">
        </a>
        <div class="details">
          <a href="#">
            <span class="name">{{ post.author.username }}</span>
          </a>
          <span class="date">{{ post.created_at |timesince }} ago</span>
        </div>
      </div>
    </div>
    <div class="content">
      <a href="{% url 'core:post-detail' post.id %}">
        <p>
          {% if post.content|length > 149 %}
          {{ post.content|truncatechars:150 }} <span class="see-more" style="color: blue;">see more</span>
          {% else %}
          {{ post.content }}
          {% endif %}
        </p>
        {% if post.image %}
        <img src="{{ post.image.url }}" alt="post image">
        {% endif %}
      </a>
    </div>

    <div class="info">
      <div class="item">
        {% if request.user.is_authenticated %}
        {% if user_liked %}
        <a href="{% url 'core:like-post' post.id %}" class="like-btn active">
          <i class="ri-heart-fill"></i>
        </a>
        {% else %}
        <a href="{% url 'core:like-post' post.id %}" class="unlike-btn">
          <i class="ri-heart-line"></i>
        </a>
        {% endif %}
        {% endif %}
        {{ post.get_like_count }} likes
      </div>

      <a href="{% url 'core:post-detail' post.id %}">
        <div class="item toggle-comments">
          <i class="ri-chat-3-line"></i>
          Comments : {{ post.comment_count }}
        </div>
      </a>

      <div class="item">
        <i class="ri-share-line"></i>
        12 Share
      </div>
      <div class="item">
        <i class="ri-bookmark-line"></i>
        Bookmarks
      </div>
      <div class="item">
        <a href="{% url 'core:category' post.slug %}"></a>
        <i class="ri-chat-thread-fill"></i>
        <span>Category: {{ post.category }}</span>
        </a>
      </div>
    </div>
  </div>
</div>
{% endfor %}